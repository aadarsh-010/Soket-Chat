{"ast":null,"code":"var _jsxFileName = \"E:\\\\Soket-chat\\\\Soket-Chat\\\\Frontend\\\\src\\\\components\\\\sidebar\\\\conversations\\\\Conversation.jsx\",\n  _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport { open_create_conversation } from \"../../../features/chatSlice\";\nimport { getConversationId, getConversationName, getConversationPicture } from \"../../../utils/chat\";\nimport { dateHandler } from \"../../../utils/date\";\nimport { capitalize } from \"../../../utils/string\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Conversation(_ref) {\n  _s();\n  var _convo$latestMessage, _convo$latestMessage2, _convo$latestMessage3, _convo$latestMessage4, _convo$latestMessage5;\n  let {\n    convo,\n    socket,\n    online,\n    typing\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    activeConversation\n  } = useSelector(state => state.chat);\n  const {\n    token\n  } = user;\n  const values = {\n    receiver_id: getConversationId(user, convo.users),\n    isGroup: convo.isGroup ? true : false,\n    token\n  };\n  const openConversation = async () => {\n    let newConvo = await dispatch(open_create_conversation(values));\n    socket.emit(\"join conversation\", newConvo.payload._id);\n  };\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    onClick: () => openConversation(),\n    className: `list-none h-[72px] w-full dark:bg-dark_bg_1 hover:${convo._id !== activeConversation._id ? \"dark:bg-dark_bg_2\" : \"\"} cursor-pointer dark:text-dark_text_1 px-[10px] ${convo._id === activeConversation._id ? \"dark:bg-dark_hover_1\" : \"\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full flex items-center justify-between py-[10px]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `relative min-w-[50px] max-w-[50px] h-[50px] rounded-full overflow-hidden ${online ? \"online\" : \"\"}`,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: convo.isGroup ? convo.picture : getConversationPicture(user, convo.users),\n            alt: \"picture\",\n            className: \"w-full h-full object-cover \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"font-bold flex items-center gap-x-2\",\n            children: convo.isGroup ? convo.name : capitalize(getConversationName(user, convo.users))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-x-1 dark:text-dark_text_2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 items-center gap-x-1 dark:text-dark_text_2\",\n                children: typing === convo._id ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-green_1\",\n                  children: \"Typing...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: ((_convo$latestMessage = convo.latestMessage) === null || _convo$latestMessage === void 0 ? void 0 : _convo$latestMessage.message.length) > 25 ? `${(_convo$latestMessage2 = convo.latestMessage) === null || _convo$latestMessage2 === void 0 ? void 0 : _convo$latestMessage2.message.substring(0, 25)}...` : (_convo$latestMessage3 = convo.latestMessage) === null || _convo$latestMessage3 === void 0 ? void 0 : _convo$latestMessage3.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col gap-y-4 items-end text-xs\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dark:text-dark_text_2\",\n          children: (_convo$latestMessage4 = convo.latestMessage) !== null && _convo$latestMessage4 !== void 0 && _convo$latestMessage4.createdAt ? dateHandler((_convo$latestMessage5 = convo.latestMessage) === null || _convo$latestMessage5 === void 0 ? void 0 : _convo$latestMessage5.createdAt) : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-16 border-b dark:border-b-dark_border_1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n_s(Conversation, \"eO2tInmgjV2GXm0RJTl9Ab9wsrQ=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Conversation;\nconst ConversationWithContext = props => /*#__PURE__*/_jsxDEV(SocketContext.Consumer, {\n  children: socket => /*#__PURE__*/_jsxDEV(Conversation, {\n    ...props,\n    socket: socket\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 18\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 97,\n  columnNumber: 3\n}, this);\n_c2 = ConversationWithContext;\nexport default ConversationWithContext;\nvar _c, _c2;\n$RefreshReg$(_c, \"Conversation\");\n$RefreshReg$(_c2, \"ConversationWithContext\");","map":{"version":3,"names":["useDispatch","useSelector","SocketContext","open_create_conversation","getConversationId","getConversationName","getConversationPicture","dateHandler","capitalize","jsxDEV","_jsxDEV","Conversation","_ref","_s","_convo$latestMessage","_convo$latestMessage2","_convo$latestMessage3","_convo$latestMessage4","_convo$latestMessage5","convo","socket","online","typing","dispatch","user","state","activeConversation","chat","token","values","receiver_id","users","isGroup","openConversation","newConvo","emit","payload","_id","onClick","className","children","src","picture","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","latestMessage","message","length","substring","createdAt","_c","ConversationWithContext","props","Consumer","_c2","$RefreshReg$"],"sources":["E:/Soket-chat/Soket-Chat/Frontend/src/components/sidebar/conversations/Conversation.jsx"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport { open_create_conversation } from \"../../../features/chatSlice\";\nimport {\n  getConversationId,\n  getConversationName,\n  getConversationPicture,\n} from \"../../../utils/chat\";\nimport { dateHandler } from \"../../../utils/date\";\nimport { capitalize } from \"../../../utils/string\";\n\nfunction Conversation({ convo, socket, online, typing }) {\n  const dispatch = useDispatch();\n  const { user } = useSelector((state) => state.user);\n  const { activeConversation } = useSelector((state) => state.chat);\n  const { token } = user;\n  const values = {\n    receiver_id: getConversationId(user, convo.users),\n    isGroup: convo.isGroup ? true : false,\n    token,\n  };\n  const openConversation = async () => {\n    let newConvo = await dispatch(open_create_conversation(values));\n    socket.emit(\"join conversation\", newConvo.payload._id);\n  };\n  return (\n    <li\n      onClick={() => openConversation()}\n      className={`list-none h-[72px] w-full dark:bg-dark_bg_1 hover:${\n        convo._id !== activeConversation._id ? \"dark:bg-dark_bg_2\" : \"\"\n      } cursor-pointer dark:text-dark_text_1 px-[10px] ${\n        convo._id === activeConversation._id ? \"dark:bg-dark_hover_1\" : \"\"\n      }`}\n    >\n      {/*Container */}\n      <div className=\"relative w-full flex items-center justify-between py-[10px]\">\n        {/*Left*/}\n        <div className=\"flex items-center gap-x-3\">\n          {/*Conversation user picture*/}\n          <div\n            className={`relative min-w-[50px] max-w-[50px] h-[50px] rounded-full overflow-hidden ${\n              online ? \"online\" : \"\"\n            }`}\n          >\n            <img\n              src={\n                convo.isGroup\n                  ? convo.picture\n                  : getConversationPicture(user, convo.users)\n              }\n              alt=\"picture\"\n              className=\"w-full h-full object-cover \"\n            />\n          </div>\n          {/*Conversation name and message*/}\n          <div className=\"w-full flex flex-col\">\n            {/*Conversation name*/}\n            <h1 className=\"font-bold flex items-center gap-x-2\">\n              {convo.isGroup\n                ? convo.name\n                : capitalize(getConversationName(user, convo.users))}\n            </h1>\n            {/* Conversation message */}\n            <div>\n              <div className=\"flex items-center gap-x-1 dark:text-dark_text_2\">\n                <div className=\"flex-1 items-center gap-x-1 dark:text-dark_text_2\">\n                  {typing === convo._id ? (\n                    <p className=\"text-green_1\">Typing...</p>\n                  ) : (\n                    <p>\n                      {convo.latestMessage?.message.length > 25\n                        ? `${convo.latestMessage?.message.substring(0, 25)}...`\n                        : convo.latestMessage?.message}\n                    </p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/*Right*/}\n        <div className=\"flex flex-col gap-y-4 items-end text-xs\">\n          <span className=\"dark:text-dark_text_2\">\n            {convo.latestMessage?.createdAt\n              ? dateHandler(convo.latestMessage?.createdAt)\n              : \"\"}\n          </span>\n        </div>\n      </div>\n      {/*Border*/}\n      <div className=\"ml-16 border-b dark:border-b-dark_border_1\"></div>\n    </li>\n  );\n}\n\nconst ConversationWithContext = (props) => (\n  <SocketContext.Consumer>\n    {(socket) => <Conversation {...props} socket={socket} />}\n  </SocketContext.Consumer>\n);\n\nexport default ConversationWithContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}