{"ast":null,"code":"var _jsxFileName = \"E:\\\\Soket-chat\\\\Soket-Chat\\\\Frontend\\\\src\\\\pages\\\\home.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Peer from \"simple-peer\";\nimport { ChatContainer, WhatsappHome } from \"../components/Chat\";\nimport { Sidebar } from \"../components/sidebar\";\nimport SocketContext from \"../context/SocketContext\";\nimport { getConversations, updateMessagesAndConversations } from \"../features/chatSlice\";\nimport Call from \"../components/Chat/call/Call\";\nimport { getConversationId, getConversationName, getConversationPicture } from \"../utils/chat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst callData = {\n  socketId: \"\",\n  receiveingCall: false,\n  callEnded: false,\n  name: \"\",\n  picture: \"\",\n  signal: \"\"\n};\nfunction Home(_ref) {\n  _s();\n  let {\n    socket\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    activeConversation\n  } = useSelector(state => state.chat);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  //call\n  const [call, setCall] = useState(callData);\n  const [stream, setStream] = useState();\n  const [show, setShow] = useState(false);\n  const {\n    receiveingCall,\n    callEnded,\n    socketId\n  } = call;\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [totalSecInCall, setTotalSecInCall] = useState(0);\n  const myVideo = useRef();\n  const userVideo = useRef();\n  const connectionRef = useRef();\n  //typing\n  const [typing, setTyping] = useState(false);\n  //join user into the socket io\n  useEffect(() => {\n    socket.emit(\"join\", user._id);\n    //get online users\n    socket.on(\"get-online-users\", users => {\n      setOnlineUsers(users);\n    });\n  }, [user]);\n\n  //call\n  useEffect(() => {\n    setupMedia();\n    socket.on(\"setup socket\", id => {\n      setCall({\n        ...call,\n        socketId: id\n      });\n    });\n    socket.on(\"call user\", data => {\n      setCall({\n        ...call,\n        socketId: data.from,\n        name: data.name,\n        picture: data.picture,\n        signal: data.signal,\n        receiveingCall: true\n      });\n    });\n    socket.on(\"end call\", () => {\n      setShow(false);\n      setCall({\n        ...call,\n        callEnded: true,\n        receiveingCall: false\n      });\n      myVideo.current.srcObject = null;\n      if (callAccepted) {\n        var _connectionRef$curren;\n        connectionRef === null || connectionRef === void 0 ? void 0 : (_connectionRef$curren = connectionRef.current) === null || _connectionRef$curren === void 0 ? void 0 : _connectionRef$curren.destroy();\n      }\n    });\n  }, []);\n  //--call user funcion\n  const callUser = () => {\n    enableMedia();\n    setCall({\n      ...call,\n      name: getConversationName(user, activeConversation.users),\n      picture: getConversationPicture(user, activeConversation.users)\n    });\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream: stream\n    });\n    peer.on(\"signal\", data => {\n      socket.emit(\"call user\", {\n        userToCall: getConversationId(user, activeConversation.users),\n        signal: data,\n        from: socketId,\n        name: user.name,\n        picture: user.picture\n      });\n    });\n    peer.on(\"stream\", stream => {\n      userVideo.current.srcObject = stream;\n    });\n    socket.on(\"call accepted\", signal => {\n      setCallAccepted(true);\n      peer.signal(signal);\n    });\n    connectionRef.current = peer;\n  };\n  //--answer call  funcion\n  const answerCall = () => {\n    enableMedia();\n    setCallAccepted(true);\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: stream\n    });\n    peer.on(\"signal\", data => {\n      socket.emit(\"answer call\", {\n        signal: data,\n        to: call.socketId\n      });\n    });\n    peer.on(\"stream\", stream => {\n      userVideo.current.srcObject = stream;\n    });\n    peer.signal(call.signal);\n    connectionRef.current = peer;\n  };\n  //--end call  funcion\n  const endCall = () => {\n    var _connectionRef$curren2;\n    setShow(false);\n    setCall({\n      ...call,\n      callEnded: true,\n      receiveingCall: false\n    });\n    myVideo.current.srcObject = null;\n    socket.emit(\"end call\", call.socketId);\n    connectionRef === null || connectionRef === void 0 ? void 0 : (_connectionRef$curren2 = connectionRef.current) === null || _connectionRef$curren2 === void 0 ? void 0 : _connectionRef$curren2.destroy();\n  };\n  //--------------------------\n  const setupMedia = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setStream(stream);\n    });\n  };\n  const enableMedia = () => {\n    myVideo.current.srcObject = stream;\n    setShow(true);\n  };\n  //get Conversations\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.token) {\n      dispatch(getConversations(user.token));\n    }\n  }, [user]);\n  useEffect(() => {\n    //lsitening to receiving a message\n    socket.on(\"receive message\", message => {\n      dispatch(updateMessagesAndConversations(message));\n    });\n    //listening when a user is typing\n    socket.on(\"typing\", conversation => setTyping(conversation));\n    socket.on(\"stop typing\", () => setTyping(false));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-screen dark:bg-dark_bg_1 flex items-center justify-center overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container h-screen flex py-[19px]\",\n        children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n          onlineUsers: onlineUsers,\n          typing: typing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), activeConversation._id ? /*#__PURE__*/_jsxDEV(ChatContainer, {\n          onlineUsers: onlineUsers,\n          callUser: callUser,\n          typing: typing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(WhatsappHome, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: (show || call.signal) && !call.callEnded ? \"\" : \"hidden\",\n      children: /*#__PURE__*/_jsxDEV(Call, {\n        call: call,\n        setCall: setCall,\n        callAccepted: callAccepted,\n        myVideo: myVideo,\n        userVideo: userVideo,\n        stream: stream,\n        answerCall: answerCall,\n        show: show,\n        endCall: endCall,\n        totalSecInCall: totalSecInCall,\n        setTotalSecInCall: setTotalSecInCall\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Home, \"jULofh6Vn6liUafu+yJIx4JMRvU=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Home;\nconst HomeWithSocket = props => /*#__PURE__*/_jsxDEV(SocketContext.Consumer, {\n  children: socket => /*#__PURE__*/_jsxDEV(Home, {\n    ...props,\n    socket: socket\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 18\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 201,\n  columnNumber: 3\n}, this);\n_c2 = HomeWithSocket;\nexport default HomeWithSocket;\nvar _c, _c2;\n$RefreshReg$(_c, \"Home\");\n$RefreshReg$(_c2, \"HomeWithSocket\");","map":{"version":3,"names":["useEffect","useRef","useState","useDispatch","useSelector","Peer","ChatContainer","WhatsappHome","Sidebar","SocketContext","getConversations","updateMessagesAndConversations","Call","getConversationId","getConversationName","getConversationPicture","jsxDEV","_jsxDEV","Fragment","_Fragment","callData","socketId","receiveingCall","callEnded","name","picture","signal","Home","_ref","_s","socket","dispatch","user","state","activeConversation","chat","onlineUsers","setOnlineUsers","call","setCall","stream","setStream","show","setShow","callAccepted","setCallAccepted","totalSecInCall","setTotalSecInCall","myVideo","userVideo","connectionRef","typing","setTyping","emit","_id","on","users","setupMedia","id","data","from","current","srcObject","_connectionRef$curren","destroy","callUser","enableMedia","peer","initiator","trickle","userToCall","answerCall","to","endCall","_connectionRef$curren2","navigator","mediaDevices","getUserMedia","video","audio","then","token","message","conversation","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","HomeWithSocket","props","Consumer","_c2","$RefreshReg$"],"sources":["E:/Soket-chat/Soket-Chat/Frontend/src/pages/home.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Peer from \"simple-peer\";\nimport { ChatContainer, WhatsappHome } from \"../components/Chat\";\nimport { Sidebar } from \"../components/sidebar\";\nimport SocketContext from \"../context/SocketContext\";\nimport {\n  getConversations,\n  updateMessagesAndConversations,\n} from \"../features/chatSlice\";\nimport Call from \"../components/Chat/call/Call\";\nimport {\n  getConversationId,\n  getConversationName,\n  getConversationPicture,\n} from \"../utils/chat\";\nconst callData = {\n  socketId: \"\",\n  receiveingCall: false,\n  callEnded: false,\n  name: \"\",\n  picture: \"\",\n  signal: \"\",\n};\nfunction Home({ socket }) {\n  const dispatch = useDispatch();\n  const { user } = useSelector((state) => state.user);\n  const { activeConversation } = useSelector((state) => state.chat);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  //call\n  const [call, setCall] = useState(callData);\n  const [stream, setStream] = useState();\n  const [show, setShow] = useState(false);\n  const { receiveingCall, callEnded, socketId } = call;\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [totalSecInCall, setTotalSecInCall] = useState(0);\n  const myVideo = useRef();\n  const userVideo = useRef();\n  const connectionRef = useRef();\n  //typing\n  const [typing, setTyping] = useState(false);\n  //join user into the socket io\n  useEffect(() => {\n    socket.emit(\"join\", user._id);\n    //get online users\n    socket.on(\"get-online-users\", (users) => {\n      setOnlineUsers(users);\n    });\n  }, [user]);\n\n  //call\n  useEffect(() => {\n    setupMedia();\n    socket.on(\"setup socket\", (id) => {\n      setCall({ ...call, socketId: id });\n    });\n    socket.on(\"call user\", (data) => {\n      setCall({\n        ...call,\n        socketId: data.from,\n        name: data.name,\n        picture: data.picture,\n        signal: data.signal,\n        receiveingCall: true,\n      });\n    });\n    socket.on(\"end call\", () => {\n      setShow(false);\n      setCall({ ...call, callEnded: true, receiveingCall: false });\n      myVideo.current.srcObject = null;\n      if (callAccepted) {\n        connectionRef?.current?.destroy();\n      }\n    });\n  }, []);\n  //--call user funcion\n  const callUser = () => {\n    enableMedia();\n    setCall({\n      ...call,\n      name: getConversationName(user, activeConversation.users),\n      picture: getConversationPicture(user, activeConversation.users),\n    });\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream: stream,\n    });\n    peer.on(\"signal\", (data) => {\n      socket.emit(\"call user\", {\n        userToCall: getConversationId(user, activeConversation.users),\n        signal: data,\n        from: socketId,\n        name: user.name,\n        picture: user.picture,\n      });\n    });\n    peer.on(\"stream\", (stream) => {\n      userVideo.current.srcObject = stream;\n    });\n    socket.on(\"call accepted\", (signal) => {\n      setCallAccepted(true);\n      peer.signal(signal);\n    });\n    connectionRef.current = peer;\n  };\n  //--answer call  funcion\n  const answerCall = () => {\n    enableMedia();\n    setCallAccepted(true);\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream: stream,\n    });\n    peer.on(\"signal\", (data) => {\n      socket.emit(\"answer call\", { signal: data, to: call.socketId });\n    });\n    peer.on(\"stream\", (stream) => {\n      userVideo.current.srcObject = stream;\n    });\n    peer.signal(call.signal);\n    connectionRef.current = peer;\n  };\n  //--end call  funcion\n  const endCall = () => {\n    setShow(false);\n    setCall({ ...call, callEnded: true, receiveingCall: false });\n    myVideo.current.srcObject = null;\n    socket.emit(\"end call\", call.socketId);\n    connectionRef?.current?.destroy();\n  };\n  //--------------------------\n  const setupMedia = () => {\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        setStream(stream);\n      });\n  };\n\n  const enableMedia = () => {\n    myVideo.current.srcObject = stream;\n    setShow(true);\n  };\n  //get Conversations\n  useEffect(() => {\n    if (user?.token) {\n      dispatch(getConversations(user.token));\n    }\n  }, [user]);\n  useEffect(() => {\n    //lsitening to receiving a message\n    socket.on(\"receive message\", (message) => {\n      dispatch(updateMessagesAndConversations(message));\n    });\n    //listening when a user is typing\n    socket.on(\"typing\", (conversation) => setTyping(conversation));\n    socket.on(\"stop typing\", () => setTyping(false));\n  }, []);\n  return (\n    <>\n      <div className=\"h-screen dark:bg-dark_bg_1 flex items-center justify-center overflow-hidden\">\n        {/*container*/}\n        <div className=\"container h-screen flex py-[19px]\">\n          {/*Sidebar*/}\n          <Sidebar onlineUsers={onlineUsers} typing={typing} />\n          {activeConversation._id ? (\n            <ChatContainer\n              onlineUsers={onlineUsers}\n              callUser={callUser}\n              typing={typing}\n            />\n          ) : (\n            <WhatsappHome />\n          )}\n        </div>\n      </div>\n      {/*Call*/}\n\n      <div className={(show || call.signal) && !call.callEnded ? \"\" : \"hidden\"}>\n        <Call\n          call={call}\n          setCall={setCall}\n          callAccepted={callAccepted}\n          myVideo={myVideo}\n          userVideo={userVideo}\n          stream={stream}\n          answerCall={answerCall}\n          show={show}\n          endCall={endCall}\n          totalSecInCall={totalSecInCall}\n          setTotalSecInCall={setTotalSecInCall}\n        />\n      </div>\n    </>\n  );\n}\n\nconst HomeWithSocket = (props) => (\n  <SocketContext.Consumer>\n    {(socket) => <Home {...props} socket={socket} />}\n  </SocketContext.Consumer>\n);\nexport default HomeWithSocket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}