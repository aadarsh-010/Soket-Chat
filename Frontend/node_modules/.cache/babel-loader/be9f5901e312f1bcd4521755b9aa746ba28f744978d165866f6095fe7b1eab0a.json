{"ast":null,"code":"var _jsxFileName = \"E:\\\\Soket-chat\\\\Soket-Chat\\\\Frontend\\\\src\\\\components\\\\Chat\\\\actions\\\\Input.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport SocketContext from \"../../../context/SocketContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Input(_ref) {\n  _s();\n  let {\n    message,\n    setMessage,\n    textRef,\n    socket\n  } = _ref;\n  const {\n    activeConversation\n  } = useSelector(state => state.chat);\n  const [typing, setTyping] = useState(false);\n  const lastTypingTimeRef = useRef(0);\n  const timer = 1000;\n  const onChangeHandler = e => {\n    setMessage(e.target.value);\n    console.log(\"1 typo\" + typing);\n    if (!typing) {\n      setTyping(true);\n      socket.emit(\"typing\", activeConversation._id);\n    }\n    lastTypingTimeRef.current = new Date().getTime();\n    console.log(\"2 typo\" + typing);\n  };\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const timeNow = new Date().getTime();\n      const timeDiff = timeNow - lastTypingTimeRef.current;\n      if (typing && timeDiff >= timer) {\n        setTyping(false);\n        socket.emit(\"stop typing\", activeConversation._id);\n        console.log(\"3 typo\" + typing);\n      }\n    }, timer);\n    return () => clearInterval(interval);\n  }, [typing]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full\",\n    children: /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"dark:bg-dark_hover_1 dark:text-dark_text_1 outline-none h-[45px] w-full flex-1 rounded-lg pl-4\",\n      placeholder: \"Type a message\",\n      value: message,\n      onChange: onChangeHandler,\n      ref: textRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Input, \"mCaVSc7bGnKMZi/VFft4OCR7tpc=\", false, function () {\n  return [useSelector];\n});\n_c = Input;\nconst InputWithSocket = props => /*#__PURE__*/_jsxDEV(SocketContext.Consumer, {\n  children: socket => /*#__PURE__*/_jsxDEV(Input, {\n    ...props,\n    socket: socket\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 18\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 55,\n  columnNumber: 3\n}, this);\n_c2 = InputWithSocket;\nexport default InputWithSocket;\nvar _c, _c2;\n$RefreshReg$(_c, \"Input\");\n$RefreshReg$(_c2, \"InputWithSocket\");","map":{"version":3,"names":["useState","useEffect","useRef","useSelector","SocketContext","jsxDEV","_jsxDEV","Input","_ref","_s","message","setMessage","textRef","socket","activeConversation","state","chat","typing","setTyping","lastTypingTimeRef","timer","onChangeHandler","e","target","value","console","log","emit","_id","current","Date","getTime","interval","setInterval","timeNow","timeDiff","clearInterval","className","children","type","placeholder","onChange","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","InputWithSocket","props","Consumer","_c2","$RefreshReg$"],"sources":["E:/Soket-chat/Soket-Chat/Frontend/src/components/Chat/actions/Input.jsx"],"sourcesContent":["import { useState , useEffect , useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport SocketContext from \"../../../context/SocketContext\";\n\nfunction Input({ message, setMessage, textRef, socket }) {\n  const { activeConversation } = useSelector((state) => state.chat);\n\n  const [typing, setTyping] = useState(false);\n  const lastTypingTimeRef = useRef(0);\n  const timer = 1000;\n   \n  const onChangeHandler = (e) => {\n    setMessage(e.target.value);\n    console.log(\"1 typo\" + typing);\n    \n    if (!typing) {\n      setTyping(true);\n      socket.emit(\"typing\", activeConversation._id);\n    }\n    \n    lastTypingTimeRef.current = new Date().getTime();\n    console.log(\"2 typo\" + typing);\n  };\n   \n  useEffect(() => {\n    const interval = setInterval(() => {\n      const timeNow = new Date().getTime();\n      const timeDiff = timeNow - lastTypingTimeRef.current;\n      \n      if (typing && timeDiff >= timer) {\n        setTyping(false);\n        socket.emit(\"stop typing\", activeConversation._id);\n        console.log(\"3 typo\" + typing);\n      }\n    }, timer);\n    \n    return () => clearInterval(interval);\n  }, [typing]);\n\n  return (\n    <div className=\"w-full\">\n      <input\n        type=\"text\"\n        className=\"dark:bg-dark_hover_1 dark:text-dark_text_1 outline-none h-[45px] w-full flex-1 rounded-lg pl-4\"\n        placeholder=\"Type a message\"\n        value={message}\n        onChange={onChangeHandler}\n        ref={textRef}\n      />\n    </div>\n  );\n}\n\nconst InputWithSocket = (props) => (\n  <SocketContext.Consumer>\n    {(socket) => <Input {...props} socket={socket} />}\n  </SocketContext.Consumer>\n);\nexport default InputWithSocket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}