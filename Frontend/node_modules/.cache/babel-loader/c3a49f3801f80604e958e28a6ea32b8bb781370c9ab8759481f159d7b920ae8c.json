{"ast":null,"code":"var _jsxFileName = \"E:\\\\Soket-chat\\\\Soket-Chat\\\\Frontend\\\\src\\\\pages\\\\home.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Peer from \"simple-peer\";\nimport { ChatContainer, WhatsappHome } from \"../components/Chat\";\nimport { Sidebar } from \"../components/sidebar\";\nimport SocketContext from \"../context/SocketContext\";\nimport { getConversations, updateMessagesAndConversations } from \"../features/chatSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Home(_ref) {\n  _s();\n  let {\n    socket\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    activeConversation\n  } = useSelector(state => state.chat);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n\n  //typing\n  const [typing, setTyping] = useState(false);\n  //join user into the socket io\n  useEffect(() => {\n    socket.emit(\"join\", user._id);\n    //get online users\n    socket.on(\"get-online-users\", users => {\n      setOnlineUsers(users);\n    });\n  }, [user]);\n\n  //get Conversations\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.token) {\n      dispatch(getConversations(user.token));\n    }\n  }, [user]);\n  useEffect(() => {\n    //lsitening to receiving a message\n    socket.on(\"receive message\", message => {\n      dispatch(updateMessagesAndConversations(message));\n    });\n    //listening when a user is typing\n    socket.on(\"typing\", conversation => setTyping(conversation));\n    socket.on(\"stop typing\", () => setTyping(false));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-screen dark:bg-dark_bg_1 flex items-center justify-center overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container h-screen flex py-[19px]\",\n        children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n          onlineUsers: onlineUsers,\n          typing: typing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), activeConversation._id ? /*#__PURE__*/_jsxDEV(ChatContainer, {\n          onlineUsers: onlineUsers,\n          typing: typing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(WhatsappHome, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Home, \"Av+rFciiJ4iCuYGmVVjRl4Ecj0E=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Home;\nconst HomeWithSocket = props => /*#__PURE__*/_jsxDEV(SocketContext.Consumer, {\n  children: socket => /*#__PURE__*/_jsxDEV(Home, {\n    ...props,\n    socket: socket\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 18\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 70,\n  columnNumber: 3\n}, this);\n_c2 = HomeWithSocket;\nexport default HomeWithSocket;\nvar _c, _c2;\n$RefreshReg$(_c, \"Home\");\n$RefreshReg$(_c2, \"HomeWithSocket\");","map":{"version":3,"names":["useEffect","useRef","useState","useDispatch","useSelector","Peer","ChatContainer","WhatsappHome","Sidebar","SocketContext","getConversations","updateMessagesAndConversations","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_ref","_s","socket","dispatch","user","state","activeConversation","chat","onlineUsers","setOnlineUsers","typing","setTyping","emit","_id","on","users","token","message","conversation","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","HomeWithSocket","props","Consumer","_c2","$RefreshReg$"],"sources":["E:/Soket-chat/Soket-Chat/Frontend/src/pages/home.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Peer from \"simple-peer\";\nimport { ChatContainer, WhatsappHome } from \"../components/Chat\";\nimport { Sidebar } from \"../components/sidebar\";\nimport SocketContext from \"../context/SocketContext\";\nimport {\n  getConversations,\n  updateMessagesAndConversations,\n} from \"../features/chatSlice\";\n\n\nfunction Home({ socket }) {\n  const dispatch = useDispatch();\n  const { user } = useSelector((state) => state.user);\n  const { activeConversation } = useSelector((state) => state.chat);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  \n  //typing\n  const [typing, setTyping] = useState(false);\n  //join user into the socket io\n  useEffect(() => {\n    socket.emit(\"join\", user._id);\n    //get online users\n    socket.on(\"get-online-users\", (users) => {\n      setOnlineUsers(users);\n    });\n  }, [user]);\n\n  \n  \n  //get Conversations\n  useEffect(() => {\n    if (user?.token) {\n      dispatch(getConversations(user.token));\n    }\n  }, [user]);\n  useEffect(() => {\n    //lsitening to receiving a message\n    socket.on(\"receive message\", (message) => {\n      dispatch(updateMessagesAndConversations(message));\n    });\n    //listening when a user is typing\n    socket.on(\"typing\", (conversation) => setTyping(conversation));\n    socket.on(\"stop typing\", () => setTyping(false));\n  }, []);\n  return (\n    <>\n      <div className=\"h-screen dark:bg-dark_bg_1 flex items-center justify-center overflow-hidden\">\n        {/*container*/}\n        <div className=\"container h-screen flex py-[19px]\">\n          {/*Sidebar*/}\n          <Sidebar onlineUsers={onlineUsers} typing={typing} />\n          {activeConversation._id ? (\n            <ChatContainer\n              onlineUsers={onlineUsers}\n              typing={typing}\n            />\n          ) : (\n            <WhatsappHome />\n          )}\n        </div>\n      </div>\n      \n    </>\n  );\n}\n\nconst HomeWithSocket = (props) => (\n  <SocketContext.Consumer>\n    {(socket) => <Home {...props} socket={socket} />}\n  </SocketContext.Consumer>\n);\nexport default HomeWithSocket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}